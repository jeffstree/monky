<!--
Jiefeng Ou, Wesley Leon, Alexandru Cimpoiesu
# monky
# SoftDev
# P01: ArRESTed Development
-->
<html>

<head>
  <title>Bird</title>
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"> </script>
</head>

<body class="bg-gray-100 font-sans leading-normal tracking-normal">
  <nav class="flex items-center justify-between flex-wrap bg-teal-500 p-6">
    <div class="flex items-center flex-shrink-0 text-white mr-6">
      <span class="font-semibold text-xl tracking-tight">Monky</span>
    </div>
    <div class="w-full block flex-grow lg:flex lg:items-center lg:w-auto">
      <div class="text-sm lg:flex-grow">
        <a href="{{url_for('home')}}"
          class="block mt-4 lg:inline-block lg:mt-0 text-teal-200 hover:text-white mr-4">Home</a>
        <a href="{{url_for('poke')}}"
          class="block mt-4 lg:inline-block lg:mt-0 text-teal-200 hover:text-white mr-4">Poke</a>
        <a href="{{url_for('cat')}}"
          class="block mt-4 lg:inline-block lg:mt-0 text-teal-200 hover:text-white mr-4">Cat</a>
        <a href="{{url_for('bird')}}"
          class="block mt-4 lg:inline-block lg:mt-0 text-teal-200 hover:text-white mr-4">Bird</a>
      </div>
      <div>
        <a href="{{url_for('logout')}}"
          class="inline-block text-sm px-4 py-2 leading-none border rounded text-white border-white hover:border-transparent hover:text-teal-500 hover:bg-white mt-4 lg:mt-0">Logout</a>
      </div>
    </div>
  </nav>

  <div class="container mx-auto mt-8 p-4">
    <h1 class="text-3xl font-bold mb-4 text-center text-gray-800">Bird Game</h1>

    {% with messages = get_flashed_messages() %}
    {% if messages %}
    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4" role="alert">
      <ul class="list-disc pl-5">
        {% for message in messages %}
        <li>{{ message }}</li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}
    {% endwith %}

    {% if won %}
    <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4 text-center">
      <strong class="font-bold">You Won!</strong>
      <span class="block sm:inline">The Bird was {{target.name|title}}!</span>
      <div class="mt-4">
        <a href="{{url_for('new_game', game_type='bird')}}"
          class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
          Play Again
        </a>
      </div>
    </div>
    {% endif %}

    {% if not won %}
    <div class="flex justify-center mb-8">
      <form method="POST" action="{{url_for('bird_game')}}" class="flex gap-2 w-full max-w-md">
        <div class="relative w-full max-w-md">
          <input type="text" id="guess-input" name="guess" placeholder="Enter Bird Name" required autocomplete="off"
            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
          <ul id="suggestions"
            class="absolute z-10 bg-white border border-gray-300 w-full rounded mt-1 hidden text-gray-700"></ul>
        </div>
        <button type="submit"
          class="bg-teal-500 hover:bg-teal-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
          Guess
        </button>
      </form>

      <script src="{{ url_for('static', filename='js/autocomplete.js') }}"></script>
      <script>
        setupAutocomplete('guess-input', 'suggestions', 'bird');
      </script>
    </div>
    {% endif %}

    {% if guesses %}
    <div class="overflow-x-auto bg-white shadow-md rounded my-6">
      <table class="min-w-full table-auto">
        <thead>
          <tr class="bg-gray-200 text-gray-600 uppercase text-sm leading-normal">
            <th class="py-3 px-6 text-left">Name</th>
            <th class="py-3 px-6 text-center">Family</th>
            <th class="py-3 px-6 text-center">Order</th>
            <th class="py-3 px-6 text-center">Wingspan</th>
            <th class="py-3 px-6 text-center">Length</th>
          </tr>
        </thead>
        <tbody class="text-gray-600 text-sm font-light">
          {% for feedback in guesses %}
          <tr class="border-b border-gray-200 hover:bg-gray-100">
            <td class="py-3 px-6 text-left whitespace-nowrap font-bold uppercase"
              title="Family: {{feedback['family']['val']}}, Order: {{feedback['order']['val']}}, Wingspan: {{feedback['wingspan']['val']}}, Length: {{feedback['length']['val']}}">
              {{feedback.name.val}}</td>

            <td class="py-3 px-6 text-center">
              <span
                class="py-1 px-3 rounded-full text-xs
                            {% if feedback.family.status == 'match' %}bg-green-200 text-green-700{% else %}bg-red-200 text-red-700{% endif %}">
                {{feedback.family.val}}
              </span>
            </td>

            <td class="py-3 px-6 text-center">
              <span
                class="py-1 px-3 rounded-full text-xs
                            {% if feedback.order.status == 'match' %}bg-green-200 text-green-700{% else %}bg-red-200 text-red-700{% endif %}">
                {{feedback.order.val}}
              </span>
            </td>

            <td class="py-3 px-6 text-center">
              <span
                class="py-1 px-3 rounded-full text-xs
                            {% if feedback.wingspan.status == 'match' %}bg-green-200 text-green-700{% else %}bg-yellow-200 text-yellow-700{% endif %}">
                {{feedback.wingspan.val}} {% if feedback.wingspan.status != 'match' %}({{feedback.wingspan.status}}){%
                endif %}
              </span>
            </td>

            <td class="py-3 px-6 text-center">
              <span
                class="py-1 px-3 rounded-full text-xs
                            {% if feedback.length.status == 'match' %}bg-green-200 text-green-700{% else %}bg-yellow-200 text-yellow-700{% endif %}">
                {{feedback.length.val}} {% if feedback.length.status != 'match' %}({{feedback.length.status}}){% endif
                %}
              </span>
            </td>

          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% endif %}
  </div>
</body>

</html>